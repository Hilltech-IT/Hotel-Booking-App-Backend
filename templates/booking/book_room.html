<div class="modal fade" id="bookRoomModal{{room.id}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5 text-center">Reserve A Room</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
            <form action="#" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="modal-body">
                <div class="row">
                    <div class="col">
                        <label for="exampleInputPassword1" class="form-label">First Name</label>
                        <input
                          type="text"
                          class="form-control"
                          id="first_name"
                          name="first_name"
                          required
                        />
                      </div>
                      <div class="col">
                          <label for="exampleInputPassword1" class="form-label">Last Name</label>
                          <input
                            type="text"
                            class="form-control"
                            id="last_name"
                            name="last_name"
                            required
                          />
                        </div>
                </div>
                <div class="row mt-3">
                    <div class="col">
                        <label for="exampleInputPassword1" class="form-label">Phone Number</label>
                        <input
                          type="text"
                          class="form-control"
                          id="phone_number"
                          name="phone_number"
                          required
                        />
                      </div>
                      <div class="col">
                        <label for="exampleInputPassword1" class="form-label">Email</label>
                        <input
                          type="email"
                          class="form-control"
                          id="email"
                          name="email"
                          required
                        />
                      </div>
                </div>
                <div class="row mt-3">
                    <div class="col">
                        <label for="exampleInputPassword1" class="form-label">ID Number</label>
                        <input
                          type="text"
                          class="form-control"
                          id="id_number"
                          name="id_number"
                          required
                        />
                      </div>
                      <div class="col">
                        <label class="form-label">Gender</label>
                        <select class="form-select" id="gender" name="gender">
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
        
                          </select>
                      </div>
                </div>
                <h4 class="text-center">Room Details</h4>
                <hr>
                <div class="row mt-3">
                    <div class="col">
                        <label for="exampleInputPassword1" class="form-label">Room</label>
                        <input
                          type="text"
                          class="form-control"
                          id="room"
                          name="room"
                          value="{{room.room_type}}"
                          readonly
                          required
                        />
                      </div>
                      <div class="col">
                        <label for="exampleInputPassword1" class="form-label">Charge Per Night</label>
                        <input
                          type="number"
                          class="form-control"
                          id="charge_per_night"
                          name="charge_per_night"
                          value="{{room.charge_per_night}}"
                          readonly
                          required
                        />
                      </div>
                </div>
                <div class="row mt-3">
                    <div class="col">
                        <label for="exampleInputPassword1" class="form-label">Checkin Date</label>
                        <input
                          type="date"
                          class="form-control"
                          id="book_from"
                          name="book_from"
                          required
                          oninput="calculateTotal()"
                        />
                      </div>
                      <div class="col">
                        <label for="exampleInputPassword1" class="form-label">Checkout Date</label>
                        <input
                          type="date"
                          class="form-control"
                          id="book_to"
                          name="book_to"
                          required
                          oninput="calculateTotal()"
                        />
                      </div>
                </div>
                <div class="row mt-3">
                    <div class="input-group mb-3">
                        <span class="input-group-text">Rooms to Reserve: </span>
                        <input type="number" class="form-control" id="rooms_booked" name="rooms_booked" min="0" max="{{room.rooms_count}}" value="0" oninput="calculateTotal()" >
                        <span class="input-group-text">x {{room.charge_per_night}}</span>
                      </div>
                  </div>

                  <div class="row mt-3">
                    <div class="col">
                        <label for="exampleInputPassword1" class="form-label">Days Booked</label>
                        <input
                          type="number"
                          class="form-control"
                          id="days_booked"
                          name="days_booked"
                          readonly
                          required
                        />
                      </div>
                      <div class="col">
                        <label for="exampleInputPassword1" class="form-label">Total Cost</label>
                        <input
                          type="number"
                          class="form-control"
                          id="total_cost"
                          name="total_cost"
                          readonly
                          required
                        />
                      </div>
                </div>
                
                  <div class="row mt-3">
                    <div class="col">
                      <label for="totalAmount">Total Amount:</label>
                  </div>
                  <div class="col">
                      <span id="totalAmount">0</span>
                  </div>
                  </div>

                <div class="text-center mt-2">
                  <button type="submit" class="btn btn-primary">Submit</button>
                </div>
              </div>
              </form>
      </div>
    </div>
  </div>


<script>
    function calculateTotal() {
        // Get the values of regular and VIP tickets
        var checkinDate = new Date(document.getElementById('book_from').value);
        var checkoutDate = new Date (document.getElementById('book_to').value);
        var roomsCount = document.getElementById('rooms_booked').value;
        const chargePerNight = "{{room.charge_per_night}}"

        var bookedDays = 0
        var totalAmount = 0
        // Calculate the difference in milliseconds
        if (checkinDate && checkoutDate && roomsCount) {
          var differenceInMilliseconds = checkoutDate - checkinDate;
          // Convert the difference to days
          bookedDays = differenceInMilliseconds / (1000 * 60 * 60 * 24);
          totalAmount = bookedDays * chargePerNight * roomsCount
        }
        

        var bookingObj = {
          "bookedDays": bookedDays,
          "roomsCount": roomsCount,
          "totalAmount": totalAmount,
          "chargePerNight": chargePerNight,
          "checkinDate": checkinDate,
          "checkoutDate": checkoutDate
        }
    
        console.log(bookingObj)
        // Calculate the total amount
        //var totalAmount = (regularTickets * regularTicketPrice) + (vipTickets * vipTicketPrice)  + (vvipTickets * vvipTicketPrice);

        // Update the total amount display
        document.getElementById('totalAmount').innerText = totalAmount;
        document.getElementById('total_cost').value = totalAmount;
        document.getElementById('days_booked').value = bookedDays;
    }

    // Set your ticket prices here
    //var regularTicketPrice = 50;
    //var vipTicketPrice = 100;
    //var vvipTicketPrice = 150;
</script>