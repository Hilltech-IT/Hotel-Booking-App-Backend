<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Room Booking Form</title>
    <style>
        .booked-date {
            background-color: #8aff8a; /* Light green background for available dates */
        }

        .hidden {
            display: none;
        }

        .booked-date {
            background-color: #8abaff; /* Light blue background for booked dates */
        }
    </style>
</head>
<body>
    <form action="your_backend_processing_url" method="post">
        <!-- Your other form inputs (email, name) -->
        <label for="checkin_date">Check-in Date:</label>
        <input type="date" id="checkin_date" name="checkin_date" required>

        <label for="checkout_date">Check-out Date:</label>
        <input type="date" id="checkout_date" name="checkout_date" required>

        <div id="error-message" class="hidden">Please select valid dates.</div>

        <input type="submit" value="Submit">
        
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                var checkinInput = document.getElementById('checkin_date');
                var checkoutInput = document.getElementById('checkout_date');
                var errorMessage = document.getElementById('error-message');
                
                // Example: Assume existing bookings as an array of booked dates
                var bookedDates = ["2024-01-22", "2024-01-23", "2024-01-24"];

                function updateAvailableDates() {
                    var selectedCheckin = new Date(checkinInput.value);
                    var selectedCheckout = new Date(checkoutInput.value);

                    // Check if the selected dates are valid
                    if (selectedCheckin >= selectedCheckout || selectedCheckin < new Date().setHours(0,0,0,0)) {
                        errorMessage.classList.remove('hidden');
                        checkoutInput.value = ''; // Reset the checkout date
                    } else {
                        errorMessage.classList.add('hidden');
                    }

                    // Filter out booked dates
                    var availableDates = bookedDates.filter(date => {
                        var currentDate = new Date(date);
                        return currentDate >= selectedCheckout || currentDate < selectedCheckin;
                    });

                    // Set the available dates for checkout
                    checkoutInput.disabled = false;
                    checkoutInput.innerHTML = '';

                    availableDates.forEach(date => {
                        var option = document.createElement('option');
                        option.value = date;
                        option.text = date;
                        if (bookedDates.includes(date)) {
                            option.classList.add('booked-date');
                        }
                        checkoutInput.add(option);
                    });
                }

                // Attach event listeners to checkin and checkout inputs
                checkinInput.addEventListener('change', updateAvailableDates);
                checkoutInput.addEventListener('change', updateAvailableDates);
            });
        </script>
    </form>
</body>
</html>
